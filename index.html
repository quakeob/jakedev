<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jake davis</title>
    <style>
        :root {
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            --border-color: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: #666666;
            --text-tertiary: #cccccc;
            --control-bg: rgba(0, 0, 0, 0.9);
            --control-border: #333333;
            --control-text: #888888;
            --button-bg: #ffffff;
            --button-text: #000000;
            --pre-bg: #0f0f0f;
            --link-border: #333333;
        }

        body.light-mode {
            --bg-primary: #ffffff;
            --bg-secondary: #f5f5f5;
            --border-color: #e0e0e0;
            --text-primary: #000000;
            --text-secondary: #666666;
            --text-tertiary: #333333;
            --control-bg: rgba(255, 255, 255, 0.95);
            --control-border: #d0d0d0;
            --control-text: #666666;
            --button-bg: #000000;
            --button-text: #ffffff;
            --pre-bg: #fafafa;
            --link-border: #d0d0d0;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        .main-content {
            flex: 1;
            padding: 40px;
            overflow-y: auto;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
        }

        .graph-container {
            width: 55%;
            position: relative;
            background: var(--bg-primary);
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            left: 20px;
            background: var(--control-bg);
            padding: 12px;
            border: 1px solid var(--control-border);
            z-index: 100;
            cursor: pointer;
            font-size: 10px;
            color: var(--control-text);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.2s;
        }

        .theme-toggle:hover {
            background: var(--button-bg);
            color: var(--button-text);
        }

        #canvas {
            display: block;
            cursor: grab;
            width: 100%;
            height: 100%;
        }

        #canvas:active {
            cursor: grabbing;
        }

        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--control-bg);
            padding: 20px;
            border: 1px solid var(--control-border);
            max-width: 240px;
            z-index: 100;
        }

        .controls h3 {
            margin-bottom: 15px;
            font-size: 13px;
            color: var(--text-primary);
            font-weight: 500;
            letter-spacing: 1px;
        }

        .control-group {
            margin-bottom: 12px;
        }

        .control-group label {
            display: block;
            font-size: 10px;
            margin-bottom: 5px;
            color: var(--control-text);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-group input[type="range"] {
            width: 100%;
        }

        .control-group input[type="checkbox"] {
            margin-right: 8px;
        }

        .control-group button {
            width: 100%;
            padding: 8px;
            background: var(--button-bg);
            color: var(--button-text);
            border: 1px solid var(--button-bg);
            cursor: pointer;
            font-size: 10px;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            transition: all 0.2s;
        }

        .control-group button:hover {
            background: var(--button-text);
            color: var(--button-bg);
        }

        .stats {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: var(--control-bg);
            padding: 12px;
            border: 1px solid var(--control-border);
            font-size: 10px;
            color: var(--control-text);
            letter-spacing: 0.5px;
        }

        .tooltip {
            position: absolute;
            background: var(--control-bg);
            padding: 8px 12px;
            border: 1px solid var(--text-primary);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s;
            font-size: 11px;
            z-index: 1000;
            color: var(--text-primary);
            letter-spacing: 0.3px;
        }

        .tooltip.visible {
            opacity: 1;
        }

        @media (max-width: 1024px) {
            .container {
                flex-direction: column;
            }

            .graph-container {
                width: 100%;
                height: 50vh;
                border-right: none;
                border-top: 1px solid #1a1a1a;
            }

            .main-content {
                height: 50vh;
            }

            .controls {
                top: 10px;
                right: 10px;
                padding: 15px;
                max-width: 200px;
            }
        }

        .path {
            margin-bottom: 8px;
            cursor: pointer;
            padding: 8px 0;
            transition: all 0.15s ease;
            color: var(--text-secondary);
            font-family: 'Courier New', monospace;
        }

        .path:hover {
            color: var(--text-primary);
        }

        .content {
            display: none;
            margin-top: 20px;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .content.active {
            display: block;
        }

        .back {
            cursor: pointer;
            margin-bottom: 20px;
            padding: 6px 12px;
            display: inline-block;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            transition: all 0.15s ease;
            font-size: 13px;
            font-family: 'Courier New', monospace;
        }

        .back:hover {
            border-color: var(--text-primary);
            color: var(--text-primary);
        }

        .file {
            margin: 4px 0;
            cursor: pointer;
            padding: 6px 0;
            transition: all 0.15s ease;
            color: var(--text-secondary);
            font-family: 'Courier New', monospace;
        }

        .file:hover {
            color: var(--text-primary);
        }

        pre {
            white-space: pre-wrap;
            margin: 15px 0;
            color: var(--text-tertiary);
            background: var(--pre-bg);
            padding: 16px;
            border: 1px solid var(--border-color);
            font-size: 13px;
            line-height: 1.6;
        }

        a {
            color: var(--text-primary);
            text-decoration: none;
            border-bottom: 1px solid var(--link-border);
            transition: all 0.15s ease;
        }

        a:hover {
            border-bottom-color: var(--text-primary);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <div id="main">
                <div class="path" onclick="navigate('home')">/home/jake</div>
                <div class="path" onclick="navigate('projects')">/home/jake/projects</div>
                <div class="path" onclick="navigate('about')">/home/jake/about.txt</div>
                <div class="path" onclick="navigate('contact')">/home/jake/contact</div>
                <div class="path" onclick="navigate('resume')">/home/jake/resume.pdf</div>
                <div class="path" onclick="navigate('misc')">/var/log/thoughts</div>
                <div class="path" onclick="navigate('hidden')">/test/1099/w-2/fun/find-me.txt</div>
            </div>

            <div id="home" class="content">
                <div class="back" onclick="goBack()">‚Üê /</div>
                <div class="file" onclick="navigate('about')">about.txt</div>
                <div class="file" onclick="navigate('contact')">contact/</div>
                <div class="file" onclick="navigate('projects')">projects/</div>
                <div class="file" onclick="navigate('resume')">resume.pdf</div>
                <div class="file">.bashrc</div>
                <div class="file">.ssh/</div>
                <div class="file">documents/</div>
            </div>

            <div id="projects" class="content">
                <div class="back" onclick="goBack()">‚Üê /home/jake</div>
                <div class="file">neural-networks/</div>
                <div class="file">web-scraper/</div>
                <div class="file">crypto-bot/</div>
                <div class="file">portfolio-site/</div>
                <div class="file">ml-experiments/</div>
                <div class="file">api-tools/</div>
                <div class="file">README.md</div>
                <pre>
// Current projects:
- Building a neural network from scratch
- Automated trading bot (work in progress)
- Various web scraping utilities
- Machine learning experiments
- This portfolio site

// Tech stack:
Python, JavaScript, React, Node.js, PostgreSQL, Docker
                </pre>
            </div>

            <div id="about" class="content">
                <div class="back" onclick="goBack()">‚Üê /home/jake</div>
                <pre>
Jake Davis

Software developer and neuroscience student.
Interested in machine learning, web development, automation, and the human brain.

Currently working on various personal projects and learning new technologies.
Always looking for interesting problems to solve.

Location: Earth
Status: Online
                </pre>
            </div>

            <div id="contact" class="content">
                <div class="back" onclick="goBack()">‚Üê /home/jake</div>
                <div class="file">email.txt</div>
                <div class="file">github</div>
                <div class="file">linkedin</div>
                <div class="file">twitter</div>
                <pre>
// Get in touch:

email: jake@bryt.works
github: github.com/jakedev
linkedin:
instagram: @jjakedavis

// Or just send a message:
echo "hello" | mail jake@bryt.works
                </pre>
            </div>

            <div id="resume" class="content">
                <div class="back" onclick="goBack()">‚Üê /home/jake</div>
                <pre>
JAKE DAVIS
Software Developer

EXPERIENCE
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Software Developer Intern | Tech Corp | 2024
- Built web applications using React and Node.js
- Worked with REST APIs and database design
- Collaborated with team of 5 developers

EDUCATION
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Neuroscience | Brigham Young University | 2027 (Expected)
Relevant Coursework: Neurobiology, Cognitive Science, Statistics

SKILLS
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

Languages: Python, JavaScript, Java, C++, Spanish
Frontend: React, HTML/CSS, TypeScript
Backend: Node.js, Express, PostgreSQL
Tools: Git, Docker, AWS, Linux
                </pre>
            </div>

            <div id="misc" class="content">
                <div class="back" onclick="goBack()">‚Üê /</div>
                <pre>
[2024-01-15 14:32] Starting new ML project
[2024-01-12 09:15] Coffee intake: excessive
[2024-01-10 23:47] Fixed the bug. It was a semicolon.
[2024-01-08 16:20] Why do I always code better at night?
[2024-01-05 11:30] New year, new repository structure
[2024-01-03 08:45] Reading papers on transformer architectures
[2024-01-01 00:01] Hello 2024
                </pre>
            </div>

            <div id="hidden" class="content">
                <div class="back" onclick="goBack()">‚Üê /</div>
                <pre>
You found the secret file!

    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë
    ‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë

Sometimes the best things are hidden in plain sight.
This path leads to more questions than answers.
But isn't that what makes it interesting?

// Congratulations on finding this
// Keep exploring, keep questioning
                </pre>
            </div>
        </div>

        <div class="graph-container">
            <canvas id="canvas"></canvas>

            <div class="theme-toggle" id="themeToggle">‚òÄ Light Mode</div>

            <div class="controls">
                <h3>KNOWLEDGE GRAPH</h3>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="autoRotate" checked>
                        Auto Rotate
                    </label>
                </div>

                <div class="control-group">
                    <label>Speed: <span id="speedValue">1</span></label>
                    <input type="range" id="speed" min="0.1" max="3" step="0.1" value="1">
                </div>

                <div class="control-group">
                    <label>
                        <input type="checkbox" id="showLinks" checked>
                        Show Connections
                    </label>
                </div>

                <div class="control-group">
                    <button id="resetBtn">Reset View</button>
                </div>
            </div>

            <div class="stats">
                <div>Nodes: <span id="nodeCount">0</span></div>
                <div>Links: <span id="linkCount">0</span></div>
                <div>Rotation: <span id="angleDisplay">0¬∞</span></div>
            </div>

            <div class="tooltip" id="tooltip"></div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const tooltip = document.getElementById('tooltip');
        let currentPage = null;

        function resizeCanvas() {
            const container = canvas.parentElement;
            const dpr = window.devicePixelRatio || 1;

            canvas.width = container.clientWidth * dpr;
            canvas.height = container.clientHeight * dpr;
            canvas.style.width = container.clientWidth + 'px';
            canvas.style.height = container.clientHeight + 'px';

            ctx.scale(dpr, dpr);
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const graphData = {
            nodes: [
                // Core/Central - main identity
                { id: 'home', label: 'Home', region: 'central', size: 14, navigable: true },
                { id: 'about', label: 'About', region: 'central', size: 12, navigable: true },

                // Frontal lobe - technical skills
                { id: 'projects', label: 'Projects', region: 'frontal', size: 12, navigable: true },
                { id: 'ml', label: 'Machine Learning', region: 'frontal', size: 10 },
                { id: 'neural-nets', label: 'Neural Networks', region: 'frontal', size: 9 },
                { id: 'python', label: 'Python', region: 'frontal', size: 9 },
                { id: 'web-dev', label: 'Web Dev', region: 'frontal', size: 9 },

                // Parietal - knowledge management
                { id: 'resume', label: 'Resume', region: 'parietal', size: 11, navigable: true },
                { id: 'automation', label: 'Automation', region: 'parietal', size: 8 },

                // Temporal - academic/research
                { id: 'neuroscience', label: 'Neuroscience', region: 'temporal', size: 11 },
                { id: 'misc', label: 'Thoughts', region: 'temporal', size: 10, navigable: true },
                { id: 'cell-biology', label: 'Cell Biology', region: 'temporal', size: 8 },

                // Occipital - communication
                { id: 'contact', label: 'Contact', region: 'occipital', size: 10, navigable: true },

                // Cerebellum - hidden/experimental
                { id: 'hidden', label: '???', region: 'cerebellum', size: 8, navigable: true },
                { id: 'crypto', label: 'Crypto Bot', region: 'cerebellum', size: 7 },
                { id: 'scraping', label: 'Web Scraping', region: 'cerebellum', size: 7 }
            ],
            links: [
                { source: 'home', target: 'about' },
                { source: 'home', target: 'projects' },
                { source: 'home', target: 'resume' },
                { source: 'home', target: 'contact' },
                { source: 'home', target: 'misc' },
                { source: 'about', target: 'neuroscience' },
                { source: 'projects', target: 'ml' },
                { source: 'projects', target: 'neural-nets' },
                { source: 'projects', target: 'python' },
                { source: 'projects', target: 'web-dev' },
                { source: 'projects', target: 'resume' },
                { source: 'ml', target: 'neural-nets' },
                { source: 'ml', target: 'python' },
                { source: 'neural-nets', target: 'neuroscience' },
                { source: 'python', target: 'automation' },
                { source: 'python', target: 'web-dev' },
                { source: 'neuroscience', target: 'cell-biology' },
                { source: 'neuroscience', target: 'misc' },
                { source: 'resume', target: 'automation' },
                { source: 'hidden', target: 'misc' },
                { source: 'hidden', target: 'crypto' },
                { source: 'hidden', target: 'scraping' },
                { source: 'crypto', target: 'python' },
                { source: 'scraping', target: 'automation' }
            ]
        };

        function positionNodesInBrain() {
            graphData.nodes.forEach(node => {
                let x, y, z;
                const spread = 0.8 + Math.random() * 0.4;

                switch(node.region) {
                    case 'frontal':
                        const fAngle = (Math.random() - 0.5) * Math.PI * 0.6;
                        const fPhi = Math.random() * Math.PI * 0.3 + Math.PI * 0.25;
                        x = Math.cos(fAngle) * Math.sin(fPhi) * 2 * spread;
                        y = Math.cos(fPhi) * 2 * spread + 0.5;
                        z = Math.sin(fAngle) * Math.sin(fPhi) * 2 * spread + 1.5;
                        break;
                    case 'parietal':
                        const pAngle = (Math.random() - 0.5) * Math.PI * 0.8;
                        const pPhi = Math.random() * Math.PI * 0.2 + Math.PI * 0.1;
                        x = Math.cos(pAngle) * Math.sin(pPhi) * 2.2 * spread;
                        y = Math.cos(pPhi) * 2.2 * spread + 0.8;
                        z = Math.sin(pAngle) * Math.sin(pPhi) * 2.2 * spread;
                        break;
                    case 'temporal':
                        const tSide = Math.random() > 0.5 ? 1 : -1;
                        x = tSide * (1.8 + Math.random() * 0.5);
                        y = (Math.random() - 0.5) * 1.5;
                        z = (Math.random() - 0.3) * 1.5;
                        break;
                    case 'occipital':
                        const oAngle = (Math.random() - 0.5) * Math.PI * 0.7;
                        const oPhi = Math.random() * Math.PI * 0.3 + Math.PI * 0.3;
                        x = Math.cos(oAngle) * Math.sin(oPhi) * 2 * spread;
                        y = Math.cos(oPhi) * 2 * spread;
                        z = Math.sin(oAngle) * Math.sin(oPhi) * 2 * spread - 1.8;
                        break;
                    case 'central':
                        const cAngle = Math.random() * Math.PI * 2;
                        const cRadius = Math.random() * 0.8;
                        x = Math.cos(cAngle) * cRadius;
                        y = (Math.random() - 0.5) * 0.8;
                        z = Math.sin(cAngle) * cRadius;
                        break;
                    case 'cerebellum':
                        const cbAngle = Math.random() * Math.PI * 2;
                        const cbRadius = 0.5 + Math.random() * 0.4;
                        x = Math.cos(cbAngle) * cbRadius * 0.8;
                        y = -1.5 - Math.random() * 0.5;
                        z = Math.sin(cbAngle) * cbRadius * 0.8 - 1.2;
                        break;
                    default:
                        x = (Math.random() - 0.5) * 4;
                        y = (Math.random() - 0.5) * 4;
                        z = (Math.random() - 0.5) * 4;
                }

                node.x3d = x;
                node.y3d = y;
                node.z3d = z;
            });
        }

        positionNodesInBrain();

        let angleX = 0.3;
        let angleY = 0;
        let autoRotate = true;
        let rotationSpeed = 1;
        let zoom = 100;
        let showLinks = true;

        function rotateX(point, angle) {
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            return {
                x: point.x,
                y: point.y * cos - point.z * sin,
                z: point.y * sin + point.z * cos
            };
        }

        function rotateY(point, angle) {
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            return {
                x: point.x * cos - point.z * sin,
                y: point.y,
                z: point.x * sin + point.z * cos
            };
        }

        function project(point) {
            const distance = 8;
            const z = point.z + distance;
            const scale = zoom;
            const container = canvas.parentElement;

            return {
                x: (point.x * scale * (distance / z)) + container.clientWidth / 2,
                y: (point.y * scale * (distance / z)) + container.clientHeight / 2,
                depth: z,
                scale: distance / z
            };
        }

        let hoveredNode = null;
        let isDragging = false;
        let lastMouseX = 0;
        let lastMouseY = 0;
        let dragStartTime = 0;

        function getNodeAt(x, y, projectedNodes) {
            return projectedNodes.find(pNode => {
                const dx = x - pNode.screen.x;
                const dy = y - pNode.screen.y;
                const size = pNode.node.size * pNode.screen.scale * 0.8;
                return Math.sqrt(dx * dx + dy * dy) < size;
            });
        }

        canvas.addEventListener('mousedown', (e) => {
            isDragging = true;
            dragStartTime = Date.now();
            lastMouseX = e.clientX;
            lastMouseY = e.clientY;
        });

        canvas.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const deltaX = e.clientX - lastMouseX;
                const deltaY = e.clientY - lastMouseY;
                angleY += deltaX * 0.01;
                angleX += deltaY * 0.01;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                autoRotate = false;
                document.getElementById('autoRotate').checked = false;
            } else {
                const projectedNodes = graphData.nodes.map(node => {
                    let rotated = rotateX({ x: node.x3d, y: node.y3d, z: node.z3d }, angleX);
                    rotated = rotateY(rotated, angleY);
                    const screen = project(rotated);
                    return { node, screen, rotated };
                });

                const newHoveredNode = getNodeAt(e.clientX, e.clientY, projectedNodes);

                if (newHoveredNode !== hoveredNode) {
                    hoveredNode = newHoveredNode;
                    if (hoveredNode) {
                        tooltip.textContent = hoveredNode.node.label;
                        tooltip.style.left = e.clientX + 10 + 'px';
                        tooltip.style.top = e.clientY + 10 + 'px';
                        tooltip.classList.add('visible');
                    } else {
                        tooltip.classList.remove('visible');
                    }
                }

                if (hoveredNode) {
                    tooltip.style.left = e.clientX + 10 + 'px';
                    tooltip.style.top = e.clientY + 10 + 'px';
                }
            }
        });

        canvas.addEventListener('mouseup', (e) => {
            const dragDuration = Date.now() - dragStartTime;

            // If click was quick (not a drag), navigate
            if (dragDuration < 200 && hoveredNode && hoveredNode.node.navigable) {
                navigate(hoveredNode.node.id);
            }

            isDragging = false;
        });

        canvas.addEventListener('mouseleave', () => {
            isDragging = false;
            hoveredNode = null;
            tooltip.classList.remove('visible');
        });

        canvas.addEventListener('wheel', (e) => {
            e.preventDefault();
            zoom *= e.deltaY > 0 ? 0.9 : 1.1;
            zoom = Math.max(50, Math.min(300, zoom));
        });

        function render() {
            const dpr = window.devicePixelRatio || 1;
            const isLight = document.body.classList.contains('light-mode');

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const projectedNodes = graphData.nodes.map(node => {
                let rotated = rotateX({ x: node.x3d, y: node.y3d, z: node.z3d }, angleX);
                rotated = rotateY(rotated, angleY);
                const screen = project(rotated);
                return { node, screen, rotated };
            });

            projectedNodes.sort((a, b) => b.screen.depth - a.screen.depth);

            if (showLinks) {
                ctx.strokeStyle = isLight ? 'rgba(0, 0, 0, 0.15)' : 'rgba(255, 255, 255, 0.12)';
                ctx.lineWidth = 1;
                graphData.links.forEach(link => {
                    const source = projectedNodes.find(n => n.node.id === link.source);
                    const target = projectedNodes.find(n => n.node.id === link.target);

                    if (source && target) {
                        ctx.beginPath();
                        ctx.moveTo(source.screen.x, source.screen.y);
                        ctx.lineTo(target.screen.x, target.screen.y);
                        ctx.stroke();
                    }
                });
            }

            projectedNodes.forEach(pNode => {
                const size = pNode.node.size * pNode.screen.scale * 0.6;
                const isHovered = hoveredNode && hoveredNode.node.id === pNode.node.id;
                const isActive = pNode.node.id === currentPage;

                const brightness = Math.floor(150 + (pNode.screen.depth - 3) * -30);
                const gray = isLight
                    ? Math.max(50, Math.min(200, 255 - brightness))  // Inverted for light mode
                    : Math.max(100, Math.min(255, brightness));      // Dark mode

                ctx.beginPath();
                ctx.arc(pNode.screen.x, pNode.screen.y, size, 0, Math.PI * 2);
                ctx.fillStyle = `rgb(${gray}, ${gray}, ${gray})`;
                ctx.fill();

                if (isHovered || isActive) {
                    ctx.strokeStyle = isLight ? '#000000' : '#ffffff';
                    ctx.lineWidth = isActive ? 3 : 2;
                    ctx.stroke();
                }

                if (isHovered || isActive || pNode.node.size > 11) {
                    ctx.font = '11px monospace';
                    ctx.fillStyle = isLight ? '#000000' : '#ffffff';
                    ctx.textAlign = 'center';
                    ctx.fillText(pNode.node.label, pNode.screen.x, pNode.screen.y + size + 15);
                }
            });
        }

        function animate() {
            if (autoRotate) {
                angleY += 0.005 * rotationSpeed;
            }

            const degrees = Math.round((angleY % (Math.PI * 2)) * 180 / Math.PI);
            document.getElementById('angleDisplay').textContent = degrees + '¬∞';

            render();
            requestAnimationFrame(animate);
        }

        document.getElementById('nodeCount').textContent = graphData.nodes.length;
        document.getElementById('linkCount').textContent = graphData.links.length;

        document.getElementById('autoRotate').addEventListener('change', (e) => {
            autoRotate = e.target.checked;
        });

        document.getElementById('speed').addEventListener('input', (e) => {
            rotationSpeed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = e.target.value;
        });

        document.getElementById('showLinks').addEventListener('change', (e) => {
            showLinks = e.target.checked;
        });

        document.getElementById('resetBtn').addEventListener('click', () => {
            angleX = 0.3;
            angleY = 0;
            zoom = 100;
            autoRotate = true;
            document.getElementById('autoRotate').checked = true;
        });

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light-mode');
            themeToggle.textContent = 'üåô Dark Mode';
        }

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            themeToggle.textContent = isLight ? 'üåô Dark Mode' : '‚òÄ Light Mode';
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        });

        // Navigation functions
        function navigate(page) {
            document.getElementById('main').style.display = 'none';
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(page).classList.add('active');
            currentPage = page;
        }

        function goBack() {
            document.getElementById('main').style.display = 'block';
            document.querySelectorAll('.content').forEach(content => {
                content.classList.remove('active');
            });
            currentPage = 'home';
        }

        currentPage = 'home';
        animate();
    </script>
</body>
</html>
